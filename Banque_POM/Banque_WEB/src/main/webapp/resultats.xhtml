<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>GreenList - Bienvenue</title>

</h:head>
<h:body>
	<ui:composition template="/WEB-INF/templates/base.xhtml">
		<ui:define name="content">

			<!-- Contenu Principal -->
			<h:form>
				<f:view contentType="text/html">
					<!-- DEBUUUUUTTT  MAPPPPPPPPPP -->

					<div id="map" class="gMapBloc">

						<p:gmap id="gmap"
							center="#{mbAdresse.latMap()}, #{mbAdresse.lngMap()}"
							zoom="11" type="ROADMAP" model="#{mbAdresse.advancedModel}"
							style="width:800PX;height:600px">

							<p:ajax event="overlaySelect"
								listener="#{mbAdresse.onMarkerSelect}" />

							<p:gmapInfoWindow id="infoWindow">
								<p:outputPanel
									style="text-align: center; display: block; margin: auto">
									<p:graphicImage
										name="/demo/images/antalya/#{mbAdresse.marker.data}"
										height="150" />
									<br />
									<h:outputText value="#{mbAdresse.marker.title}" />
								</p:outputPanel>
							</p:gmapInfoWindow>

						</p:gmap>
					</div>

					<!-- FIIINNNN MAAAAAAAP -->
				</f:view>

				<div class="searchOptionsBar">
					<div class="nbResults">
						<span>Résultats:
							#{mbRecherche.resultatRechercheList.size()}</span>
					</div>
					<div class="orderResults">
						<span>Trier par <select>
								<option>Pertinence</option>
								<option>Valeur: ordre croissant</option>
								<option>Valeur: ordre décroissant</option>
								<option>Distance</option>
						</select>
						</span>
					</div>
				</div>
				<div class="resultatsBloc">
					<div id="map" class="gMapBloc"></div>
					<div id="monObjetsBloc" class="objetsBloc">





						<ui:repeat value="#{mbRecherche.resultatRechercheList}"
							var="objet" varStatus="stat">
							<div class="objetArticle letter">
								<div class="imageDiv">

									<h:graphicImage value="#{objet.photos[0].url}" />
								</div>
								<div class="infosObjet">
									<div class="titleObjet">
										<h:commandLink action="#{mbRecherche.voirFiche(objet.id)}"
											value="#{objet.libelle}" />
									</div>

									<div class="titleObjet">
										<h:commandLink
											action="#{mbRecherche.voirProprietaire(objet.utilisateur.id)}"
											value="#{objet.utilisateur.pseudo}" />
										<span></span>

									</div>
									<div class="objetIconeBloc">
										<ul>
											<li><span class="catObjet fa fa-gift">#{objet.produit.groupe.domaine.id}</span></li>

											<li><span class="objetIconeText">#{objet.distance}
													km</span><span class="fa fa-map-marker"></span></li>
											<li><span class="objetIconeText">#{objet.valeur}</span><span
												class="fa fa-snowflake-o"></span></li>
											<li><span class="objetIconeText">#{objet.pertinence}</span><span
												class="fa fa-percent"></span></li>
										</ul>
									</div>
								</div>
								<div class="addBasketIcon">
									<p:commandButton
										action="#{mbPanierSession.ajoutObjet(objet.id)}"
										class="fa fa-plus">
										<f:ajax execute="@form" render="@none" />
									</p:commandButton>
								</div>
								<div class="numObjet">#{stat.index +1}</div>
							</div>

						</ui:repeat>



					</div>
				</div>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>
