<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>GreenList - Bienvenue</title>
	<f:metadata>
		<f:event listener="#{mbEchange.init()}" type="preRenderView"></f:event>
	</f:metadata>
</h:head>
<h:body>
	<ui:composition template="/WEB-INF/templates/base.xhtml">
		<ui:define name="content">
			<!-- Contenu Principal -->
			<div class="mainPanel">
				<!-- Echange Progress Steps Bar -->

				<ol class="progress-track">
					<li class="progress-done">
						<center>
							<div class="icon-wrap">
								<span class="fa fa-check"></span>
							</div>
							<span class="progress-text"> Initialisation </span>
						</center>
					</li>

					<li class="progress-done progress-current">
						<center>
							<div class="icon-wrap">
								<span class="fa fa-spinner fa-pulse"></span>
							</div>
							<span class="progress-text"> Négociation </span>
						</center>
					</li>

					<li class="progress-todo">
						<center>
							<div class="icon-wrap">
								<span></span>
							</div>
							<span class="progress-text">Rendez-vous</span>
						</center>
					</li>

					<li class="progress-todo">
						<center>
							<div class="icon-wrap">
								<span></span>
							</div>
							<span class="progress-text">Transaction</span>
						</center>
					</li>
					<li class="progress-todo">
						<center>
							<div class="icon-wrap">
								<span></span>
							</div>
							<span class="progress-text">Confirmation</span>
						</center>
					</li>
				</ol>

				<!-- Echange Etape -->

				<!-- Page titre -->


				<div class="pageTitleBloc">
					<div class="pageTitleIcon">
						<span class="fa-2x">2</span>
					</div>
					<div class="pageTitle">Négocier Echange</div>
				</div>

				<!-- Page Content -->

				<div class="mainEchange">
					<div class="echangeVersusBloc">
						<div class="pageSubTitle">
							<span>Moi</span>
						</div>
						<div class="pageSubTitle">
							<span>Autre</span>
						</div>
					</div>
					<div class="echangeVersusBloc">
						<div class="userEchangeBloc">
							<div>
								<span class="fa fa-user-circle-o fa-3x userAvatar"></span>
								<!-- <img id="imgProfil" class="userAvatar" /> -->
							</div>
							<ul>
								<li><a>#{mbEchange.moi.pseudo}</a></li>
								<li><span>Confirmé
										#{mbEchange.userXP(mbEchange.moi)}</span></li>
								<li class="stars">#{mbEchange.userMoyenne(mbEchange.moi)}</li>
								<li><span><a>#{mbEchange.userAvis(mbEchange.moi)}
											Avis</a></span></li>
							</ul>
						</div>

						<div class="userEchangeBloc">
							<div>
								<span class="fa fa-user-circle-o fa-3x userAvatar"></span>
								<!-- <img id="imgProfil" class="userAvatar" /> -->
							</div>
							<ul>
								<li><a>#{mbEchange.autre.pseudo}</a></li>
								<li><span>Confirmé
										#{mbEchange.userXP(mbEchange.autre)}</span></li>
								<li class="stars">#{mbEchange.userMoyenne(mbEchange.autre)} 
								</li>
								<li><span><a>#{mbEchange.userAvis(mbEchange.autre)}
											Avis</a></span></li>
							</ul>
						</div>
					</div>

					<h:form class="mainForm">

						<div class="echangeOneBloc">
							<span>creer le #{mbEchange.echange.dateCreation}</span>
						</div>

						<div class="echangeVersusBloc">
							<section class="echangeObjetListe blocGauche">
								<ui:repeat value="#{mbEchange.objetsMoi}" var="objet">
									<ul class="echangeLigneObjet">
										<li class="ordre1"><span
											class="fa fa-plus-circle fa-2x deepGreyColor"> <h:commandButton
													value="-">
													<f:ajax event="click" render="@form"
														listener="#{mbEchange.retirerObjet(objet)}" />
												</h:commandButton>
										</span></li>

										<li class="ordre2">photo</li>

										<li class="echangeLigneIntitule ordre3">#{objet.libelle}</li>
										<li class="echangeLigneValeur ordre4">#{objet.valeur}</li>
										<li class="fa fa-snowflake-o ordre5"></li>
									</ul>

								</ui:repeat>
								<h:panelGroup class="echangeLigneObjet"
									rendered="#{mbEchange.floconsProposesMoi > 0}">
									<div class="echangeLigneIntitule ordre3">Sapins proposés
										:</div>
									<div class="echangeLigneValeur ordre4">#{mbEchange.floconsProposesMoi}</div>
								</h:panelGroup>


							</section>
							<section class="echangeObjetListe blocDroit">

								<ui:repeat value="#{mbEchange.objetsAutre}" var="objet">
									<ul class="echangeLigneObjet">
										<li class="ordre1"><span
											class="fa fa-plus-circle fa-2x deepGreyColor"> <h:commandButton
													value="-">
													<f:ajax event="click" render="@form"
														listener="#{mbEchange.retirerObjet(objet)}" />
												</h:commandButton>
										</span></li>

										<li class="ordre2">Photo</li>

										<li class="echangeLigneIntitule ordre3">#{objet.libelle}</li>
										<li class="echangeLigneValeur ordre4">#{objet.valeur}</li>
										<li class="fa fa-snowflake-o ordre5"></li>
									</ul>

								</ui:repeat>
								<h:panelGroup class="echangeLigneObjet"
									rendered="#{mbEchange.floconsProposesAutre > 0}">
									<div class="echangeLigneIntitule ordre3">Flocons proposés
										:</div>
									<div class="echangeLigneValeur ordre4">#{mbEchange.floconsProposesAutre}</div>
								</h:panelGroup>
							</section>
						</div>

						<div class="echangeVersusBloc">
							<ul class="userTotal">
								<li class="ordre2"><h:inputText id="propoFlocons"
										value="#{mbEchange.propositionFloconsGauche}" /> <h:commandButton
										value="OK">
										<f:ajax render="@form" event="click" execute="propoFlocons"
											listener="#{mbEchange.majNegociation()}" />
									</h:commandButton></li>
							</ul>
							<div class="userTotal ordreInverse"></div>


						</div>

						<div class="echangeVersusBloc">
							<ul class="userTotal">
								<li class="ordre1">Total</li>
								<li class="ordre2">#{mbEchange.totalValeur(mbEchange.objetsMoi,
									mbEchange.moi)}</li>
								<li class="fa fa-snowflake-o ordre5"></li>
							</ul>
							<ul class="userTotal ordreInverse">
								<li class="ordre1">Total</li>
								<li class="ordre2">#{mbEchange.totalValeur(mbEchange.objetsAutre,
									mbEchange.autre)}</li>
								<li class="fa fa-snowflake-o ordre5"></li>
							</ul>
						</div>
					</h:form>
				</div>

				<!-- Chat Bloc -->
			</div>

		</ui:define>
	</ui:composition>
</h:body>
</html>
